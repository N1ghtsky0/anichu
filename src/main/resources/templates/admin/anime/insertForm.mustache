<!DOCTYPE html>
<html lang="ko">
<head>
  <title>Title</title>
  {{>common/header}}
</head>
<body>
{{>common/navbar}}
<form id="frm" class="container p-3" action="/adm/anime/insert" method="post" enctype="multipart/form-data">
  <input type="hidden" name="{{_csrf.parameterName}}" value="{{_csrf.token}}">
  <h2 class="mb-4">애니메이션 등록</h2>
  <hr class="my-3">
  <div class="row mb-4">
    <div class="col-12 col-md-6 order-1 mb-3">
      <input type="file" accept="image/*" id="thumbnail" name="thumbnail" onchange="loadFile(this)"/>
      <div class="w-100 h-100 d-flex align-items-center justify-content-center mb-3">
        <div id="imagePreview"></div>
      </div>
    </div>
    <div class="col-12 col-md-6 order-2">
      <div class="mb-3">
        <label for="inputTitleOrigin" class="form-label">원제<span style="color: red"> *</span></label>
        <input type="text" class="form-control" id="inputTitleOrigin" name="titleOrigin" />
      </div>
      <div class="mb-3">
        <label for="inputTitleKor" class="form-label">한글 제목<span style="color: red"> *</span></label>
        <input type="text" class="form-control" id="inputTitleKor" name="titleKor" />
      </div>
      <div class="mb-3">
        <label for="inputQuarter" class="form-label">방영 분기</label>
        <input type="text" class="form-control" id="inputQuarter" name="quarter" />
      </div>
      <div class="mb-3">
        <label for="inputFirstBroadCastDate" class="form-label">첫 방영일</label>
        <input type="text" class="form-control" id="inputFirstBroadCastDate" name="firstBroadCastDate" />
      </div>
      <div class="mb-3">
        <label for="inputTotalEpisodes" class="form-label">총 회차수</label>
        <input type="text" class="form-control" id="inputTotalEpisodes" name="totalEpisodes" />
      </div>
    </div>
  </div>
  <div class="d-flex justify-content-center">
    <a href="/admin/anime/list" class="btn btn-secondary mx-2">취소</a>
    <a href="javascript:void(0);" onclick="fn_summit()" id="summitBtn" class="btn btn-primary mx-2">저장</a>
  </div>
</form>
{{>common/footer-script}}
<script>
  function loadFile(input) {
    const file = input.files[0];

    let newImage = document.createElement("img");
    newImage.src = URL.createObjectURL(file);

    newImage.style.maxHeight = "300px";
    newImage.style.maxWidth = "400px";

    $("#imagePreview").append(newImage);
  }

  function isEmpty(item) {
    return (!item || item.length === 0);
  }

  function fn_summit() {
    const thumbnail = $("#thumbnail").val();
    const inputTitleOrigin = $("#inputTitleOrigin").val().trim();
    const inputTitleKor = $("#inputTitleKor").val().trim();

    if (isEmpty(thumbnail)) {
      alert("썸네일은 필수값입니다.");
    } else if (isEmpty(inputTitleOrigin)) {
      alert("원제목은 필수값입니다.");
    } else if (isEmpty(inputTitleKor)) {
      alert("한글 제목은 필수값입니다.");
    } else {
      if (confirm("저장하시겠습니까?")) {
        $("#frm").submit();
      }
    }
  }
</script>
</body>
</html>